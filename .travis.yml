---
sudo: false
addons:
  apt:
    packages:
      - aspell
env:
  global:
    - AUTHOR_TESTING=1
    - AUTOMATED_TESTING=1
    - RELEASE_TESTING=0
    - HARNESS_OPTIONS=j10:c
    - HARNESS_TIMER=1
    - DZIL_AIRPLANE=1
before_install:
  - git config --global user.name "TravisCI"
  - git config --global user.email $HOSTNAME":not-for-mail@travis-ci.org"
install:
  - cpanm JSON::PP
  - cpanm --verbose --skip-satisfied Dist::Zilla
  - "dzil authordeps --missing | grep -vP '[^\\w:]' | xargs -n 5 -P 10 cpanm"
  - "dzil listdeps --author --missing | grep -vP '[^\\w:]' | cpanm"
language: perl
perl:
  - "5.26"
  - "5.24"
  - "5.22"
  - "5.20"
  - "5.18"
  - "5.16"
  - "5.14"
  - "5.12"
  - "5.10"
  - "5.8"
script:
  - dzil test --author --smoke
